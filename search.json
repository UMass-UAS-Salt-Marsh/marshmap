[{"path":"https://umass-uas-salt-marsh.github.io/marshmap/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Bradley Compton. Author, maintainer.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Compton B (2025). saltmarsh: UMass UAS Salt Marsh Project salt marsh land cover mapping. R package version 0.0.0.9000, https://github.com/UMass-UAS-Salt-Marsh/marshmap.","code":"@Manual{,   title = {saltmarsh: UMass UAS Salt Marsh Project salt marsh land cover mapping},   author = {Bradley Compton},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://github.com/UMass-UAS-Salt-Marsh/marshmap}, }"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"marshmap","dir":"","previous_headings":"","what":"UMass UAS Salt Marsh Project salt marsh land cover mapping","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"UMass UAS Salt Marsh Project salt marsh land cover mapping marshmap special-purpose package vegetation mapping component UMass UAS Salt Marsh project. project uses UAS (Unoccupied Aerial Systems), .k.“drones,” number sensors, along field transects drive vegetation cover models several salt marshes Massachusetts. package supports modeling project. intended run UMass Unity cluster using slurmcollie, although functions may run locally needed. documentation work progress.","code":""},{"path":[]},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"install-the-package-and-dependencies","dir":"","previous_headings":"Installation and set up","what":"Install the package and dependencies","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"","code":"# install.packages(\"devtools\") devtools::install_github('UMass-UAS-Salt-Marsh/marshmap') devtools::install_github('UMassCDS/slurmcollie')                                    # a companion package required for running batch jobs on Unity devtools::install_github('rspatial/terra')                                          # need this until 1.8-73 is released on CRAN devtools::install_github('bwcompton/batchtools', ref = 'bwcompton-robust-sbatch')   # while waiting for pull request"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"authorize-google-drive","dir":"","previous_headings":"Installation and set up","what":"Authorize Google Drive","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"’ll getting data Google Drive gather, ’ll need get authorization token. needs done user. Run following Unity account ’ll using:","code":"set_up_google_drive()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"processing-sequence","dir":"","previous_headings":"","what":"Processing sequence","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"’s brief summary processing sequence. See help function details. example sequence created soon. normally launched batch jobs Unity via slurmcollie (except screen intrinsically interactive speedy assess). gather Gather data source (either Google Drive SFTP) screen build flights database open web app allow visually assigning quality scores image. derive Create derived images, NDVI (Normalized Difference Vegetation Index), upscaled images, canopy height estimates difference mid-summer early spring DEMs. sample Sample images points field-collected data, creating data table modeling. fit Build statistical models vegetation cover random forests, AdaBoost (planned), potentially modeling frameworks report model assessment. map Produce geoTIFF maps predicted vegetation cover.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"additional-functions","dir":"","previous_headings":"Processing sequence","what":"Additional functions","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"fitinfo Displays information fits database one fits, including model specification, assessment, run statistics CPU memory use. Can also used save Excel-friendly text version fits database set assessment scores comments. mapinfo Displays information maps database, including model used map run statistics CPU memory use. Can also used Can also used save Excel-friendly text version maps database set map scores comments. assess Provide model assessment. normally included fit, assess may called separately assess fit model built one sites applied sites. flights_report Creates report orthoimages sites, including summary site, list files flagged repair screen, list duplicated portable names site, list files site. build_flights_db Builds flights database site, necessary new files downloaded gather. normally called screen first view site, ’s need call manually unless unable unwilling run screen. find_orthos(site, descrip) Returns data frame file names portable names matched one file names, portable names, search names, regular expressions file names portable names given site. can use refine name designations sure ’re getting want.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"slurmcollie-functions","dir":"","previous_headings":"Processing sequence","what":"slurmcollie functions","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"See slurmcollie details. info() Shows status jobs ’ve launched showlog(job) Shows log running finished job kill(jobs) Kill one jobs didn’t mean launch purge(jobs) Purge jobs finished failed longer care ","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"image-naming","dir":"","previous_headings":"","what":"Image naming","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"UAS images (orthophotos, DEMs, canopy height models, derived variables) may referred three different ways. Functions take imagery names arguments (gather, derive, sample, fit) use find_orthos resolve three name types, well regular expressions file names portable names. Use find_orthos try name designations.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"file-name","dir":"","previous_headings":"Image naming","what":"File name","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"file name assigned image processing. Filenames usually encode image’s date, site, tide level, sensor, type, instance 19Aug22_OTH_Mid_SWIR_Ortho.tif 14Oct20_OTH_Low_Mica_DEM.tif. File names somewhat inconsistent, instance, month may Sep Sept, years may 2 4 digits, sensors referred multiple names. Additionally, filenames follow wildly different pattern, OTH_Aug2022_CHM_NoThin_5cmTriNN_NAD83.tif, canopy height model. Files imported source repositories (either Google Drive SFTP) names unmodified. using derive create derived images (example, NDVI mean upscaling), derived names generated base name (names), derivation information separated double underscore, e.g., x20Jun22_OTH_Mid_Mica_Ortho__NDVI.tif. See derive details. file names unsuitable use modeling include site code exact date flight, break attempt build model one sites apply others. name inconsistencies also make difficult use.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"portable-name","dir":"","previous_headings":"Image naming","what":"Portable name","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"Portable names generated build_flights_db (called update flights database whenever run screen, ’re visually screening images normal process won’t need worry ). Portable names exclude site, use seasons instead exact date, force naming consistency. Portable names images consist : <type>_<sensor>_<season>_<year>_<tide>[.<tidemod>][_<derive>[.<window>]] portable names canopy height models simply: chm_<source>_<year>, source either lidar delta. examples file names portable names Portable names used variable names data files created sample, ’re names ’ll see model assessments. can find portable name file data/<site>/flights/flights_<site>.txt. portable name displayed screen app. cases portable names refer two image files (two identical site/type/sensor/tide flights flown season), image highest score used. Remaining ties broken taking earliest matching image.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/index.html","id":"search-name","dir":"","previous_headings":"Image naming","what":"Search name","title":"UMass UAS Salt Marsh Project salt marsh land cover mapping","text":"Finally, search names allow model fits refer multiple files easily-readable format. components search name separated vertical bars (note pretty separators, logical –parts search name conjunctive). Multiple values component separated commas, colon select range ordinal values season year. Modifiers (, , spring tides; window size upscaled variables) separated component period, e.g., mid.. Components search name may appear order. component search name narrows search, thus mica | low, mid matches files Mica sensor low mid-tide. example search names: mid., mid., highmica, swir, p4 | ortho | high.spring | spring:fall | 2019:2022mica, swir | ortho, dem | low:high | spring | 2018 Search names allow model fits described clearly concisely, even models contain dozens variables, often . See help(search_names) details.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aggreg.html","id":null,"dir":"Reference","previous_headings":"","what":"Improved version of aggregate — aggreg","title":"Improved version of aggregate — aggreg","text":"Improve miserable aggregate function: ignore NAs return NA group Inf NaN warnings sort grouping variable optionally return result column optionally drop groups many NAs","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aggreg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Improved version of aggregate — aggreg","text":"","code":"aggreg(x, by, FUN, drop_by = TRUE, nomiss = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aggreg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Improved version of aggregate — aggreg","text":"x Vector aggregate Vector(s) group (1 grouping variable, list) FUN Function summarize drop_by TRUE, drop grouping variable just return vector; otherwise, return data frame nomiss NULL, represents proportion data group must non-missing; threshold met, result group NA","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aggreg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Improved version of aggregate — aggreg","text":"Vector aggregated values (drop_by = TRUE), data frame groups aggregated values (drop_by = FALSE)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/assess.html","id":null,"dir":"Reference","previous_headings":"","what":"Assess a model fit from validation data — assess","title":"Assess a model fit from validation data — assess","text":"Provide model assessment. Normally called fit, may called separately models applied new sites.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/assess.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assess a model fit from validation data — assess","text":"","code":"assess(   fitid = NULL,   model = NULL,   newdata = NULL,   site = NULL,   top_importance = 20,   summary = TRUE,   confusion = TRUE,   importance = TRUE,   quiet = FALSE )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/assess.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assess a model fit from validation data — assess","text":"fitid id model fits database. using , omit model, model info extracted database. model called do_fit; named list : fit model fit object confuse Confusion matrix nvalidate Number cases validation set id Model id name Model name newdata alternate validation set (e.g., different site). Variables must conform original dataset. site One site names, display top_importance Number variables keep variable importance summary Print model summary info TRUE confusion Print confusion matrix complete statistics TRUE, skip FALSE importance Print variable importance TRUE, skip printing FALSE quiet TRUE, print anything; just silently return stuff","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/assess.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assess a model fit from validation data — assess","text":"Invisibly, named list confusion Confusion matrix complete statistics importance Variable importance data frame","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/assess.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Assess a model fit from validation data — assess","text":"Called do_fit, also may called user. Either provide fitid model want assess (normal approach), model, list necessary arguments (approach used do_fit, model yet database). call assess console, fits database updated new assessment. may supply newdata assess model sites different model built . newdata data frame conforms data model built . (exactly?) Assessments returned invisibly; default, printed console. Explanations 1. Model info Model fit id name, supplied Number variables fit Sample size training validation holdout set. confusion matrix statistics derived holdout set. Correct classification rate, percent cases predicted correctly. Kappa, refined version CCR takes probability chance agreement account. 2. Confusion matrix Shows classification errors made. Values falling diagonal predicted correctly. 3. Overall statistics Accuracy correct classification rate (also known CCR), percent cases fall diagonal confusion matrix. Information Rate CCR get always bet majority class. Kappa refined version CCR takes probability chance agreement account. McNemar's test applies two-class data. 4. Statistics class Lists following statistics subclasses. scale 0 1, 1 generally indicating higher performance (except prevalence, detection rate, detection prevalence). Precision, proportion cases predicted class actually (true positives / (true positives + false positives)) Recall, proportion cases actually class predicted class (true positives / (true positives + false negatives)) F1, harmonic mean precision recall; combined metric model performance Prevalence, proportion cases class Detection Rate, proportion cases correctly predicted class Detection Prevalence, proportion cases predicted class Balanced Accuracy, mean true positive rate true negative rate; combined metric model performance AUC (Area Curve) probability model, particular class, given random case class random case another class, rate case class higher. Unlike statistics, AUC independent particular cutpoint chosen, telling us performance probabilities produced model. 5. Variable importance Scaled 0 100, gives relative contribution variable model fit. Less-important variables trimmed based top_importance option. Note variables imagery bands, entire orthoimage; thus, instance, RGB true color image represents three variables, may come model separately.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aucs.html","id":null,"dir":"Reference","previous_headings":"","what":"Return multi-class AUC (Area Under the Curve) for ranger models from caret — aucs","title":"Return multi-class AUC (Area Under the Curve) for ranger models from caret — aucs","text":"use , must following training model: Class names must valid R variables, 1, 2, 3, ... must still factors. need supply trControl option train following: control <- trainControl(    allowParallel = TRUE,    method = 'cv',    number = 5,    classProbs = TRUE,    savePredictions = 'final' ) class levels end numbers (e.g., class1, class, class3), result sorted numbers get crap like class1, class10, class100.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aucs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return multi-class AUC (Area Under the Curve) for ranger models from caret — aucs","text":"","code":"aucs(fit, sort = TRUE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aucs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return multi-class AUC (Area Under the Curve) for ranger models from caret — aucs","text":"fit Model fit train sort TRUE, sort classes trailing number","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/aucs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Return multi-class AUC (Area Under the Curve) for ranger models from caret — aucs","text":"vector AUC class","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/build_flights_db.html","id":null,"dir":"Reference","previous_headings":"","what":"Build or update the flights database — build_flights_db","title":"Build or update the flights database — build_flights_db","text":"Build update flights database site, normally called screen; call unable unwilling run screen.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/build_flights_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build or update the flights database — build_flights_db","text":"","code":"build_flights_db(site, refresh = FALSE, really = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/build_flights_db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build or update the flights database — build_flights_db","text":"site Site abbreviation refresh Recreated database scratch. Warning: destroy existing database, including assigned scores comments. Requires also supplying really = TRUE. really TRUE, allows refresh recreate database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/build_flights_db.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build or update the flights database — build_flights_db","text":"list db Site database table db_name Path name database table","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/build_flights_db.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Build or update the flights database — build_flights_db","text":"Reads existing flights_.txt flights directory site, builds updates new deleted files, saves new version, returns path/name table. Finds classes pars.yml case-insensitive underscore-separated words (applying name fixes). Files changed timestamps presumed re-downloaded gather (stamps set processing). Files re-downloaded replaced unless changed source, files presumable repaired. refreshed flights database, ready re-screening.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/center_zoom.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce a zoomed crop into the center of a terra object — center_zoom","title":"Produce a zoomed crop into the center of a terra object — center_zoom","text":"Produce zoomed crop center terra object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/center_zoom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce a zoomed crop into the center of a terra object — center_zoom","text":"","code":"center_zoom(x, factor)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/center_zoom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produce a zoomed crop into the center of a terra object — center_zoom","text":"x terra object factor Proportion image include","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/check_files.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that each source file exists on the result directory and is up to date — check_files","title":"Check that each source file exists on the result directory and is up to date — check_files","text":"Check source file exists result directory date","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/check_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that each source file exists on the result directory and is up to date — check_files","text":"","code":"check_files(files, gd, sourcedir, resultdir)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/check_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that each source file exists on the result directory and is up to date — check_files","text":"files Vector files check gd Source Drive info (optional), named list dir            Google directory info, get_dir sourcedrive    source drive (local, google, sftp) sftp           list(url, user) sourcedir Origin directory files resultdir Target directory files - see origin files date","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/check_files.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check that each source file exists on the result directory and is up to date — check_files","text":"vector corresponding files, TRUE exist date","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/db_purge.html","id":null,"dir":"Reference","previous_headings":"","what":"Purge selected fits or maps from database — db_purge","title":"Purge selected fits or maps from database — db_purge","text":"Called fitpurge mappurge purge database rows restore , well purging restoring sidecar files.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/db_purge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Purge selected fits or maps from database — db_purge","text":"","code":"db_purge(which, db_name, id_name, rows, failed, undo)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/db_purge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Purge selected fits or maps from database — db_purge","text":"database? Either fit map db_name Either 'fdb' 'mdb' id_name Either fitid mapid rows Selected rows database. Use one empty string purge rows, purge stray fit sidecar files vector ids purge rows named list filter rows. List items <field database> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. failed TRUE, rows success FALSE NA purged. alternative specifying rows. undo Undo previous purges. time limit undoing, matter whether run fits maps since purge. may supply either: undo = 'last', reverses previous purge call, database associated files restored. vector fit ids corresponding previously purged rows. Note may view purged fits fitinfo mapinfo purged = TRUE.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/derive.html","id":null,"dir":"Reference","previous_headings":"","what":"Create derived variables — derive","title":"Create derived variables — derive","text":"Crease derived variables NDVI NDRE, upscaled images, canopy height estimates.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/derive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create derived variables — derive","text":"","code":"derive(   site,   pattern1 = \"\",   pattern2 = NULL,   metrics = c(\"NDVI\", \"NDWIg\", \"NDRE\"),   window = 3,   resources = NULL,   local = FALSE,   trap = TRUE,   comment = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/derive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create derived variables — derive","text":"site One site names, using 3 letter abbreviation. Use process sites. batch mode, named site run separate job. pattern1 File names, portable names, regex matching either, search names selecting source derived variables. See Image naming README details. See details. pattern2 second pattern vector layer names, used bivariate metrics. See details. metrics list metrics apply. Univariate metrics include: NDVI Normalized difference vegetation index, (NIR - red) / (NIR + red), index biomass NDWIg Normalized difference water index (green, commonly known McFeeter's NDWI), (green - NIR) / (green + NIR), primarily helps distinguish waterbodies NDRE Normalized difference red edge index, (NIR - RE) / (NIR + RE), index amount chlorophyll plant mean mean band window, size defined window std standard deviation band window, size defined window NDVImean mean NDVI window, size defined window NDVIstd standard deviation NDVI window, size defined window NDWIswir Normalized difference water index (SWIR, commonly known Gao's NDWI), (NIR - SWIR) / (NIR + SWIR), index water content leaves; requires Mica layer pattern1, matched SWIR layer pattern2 delta difference pattern1 pattern2, may useful taking difference late-season early-season DEMs represent vegetation canopy height window Window size mean, std, NDVImean, NDVIstd, cells; windows square, just specify single number. Bonus points remember make odd. resources Slurm launch resources. See launch. take priority #'    function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/derive.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create derived variables — derive","text":"function creates number univariate bivariate metrics derived raster data, NDVI NDRE. Results written rasters flights directory, metric included name. metrics treated like source layers subsequent processing modeling. univariate metrics, supply one layer names via pattern1. metrics calculated layer specified pattern1. Results named <layer>__<metric>. bivariate metrics, specify matched pairs layers pattern1 pattern2. best specify complete names (can use vectors ) layers paired properly. crazy enough use regular expressions , scrutinize result names carefully. Results named <layer1>__<layer2>__metric. moment, NDWIswir delta bivariate metrics. Note normalized difference (NDxx) metrics require five-band Mica data. Note derived metrics get two underscores names, e.g., <layer>__NDVI. used distinguish primary derived data. fits workflow gather sample.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_derive.html","id":null,"dir":"Reference","previous_headings":"","what":"Create derived variables such as NDVI and NDRE — do_derive","title":"Create derived variables such as NDVI and NDRE — do_derive","text":"Create derived variables NDVI NDRE","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_derive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create derived variables such as NDVI and NDRE — do_derive","text":"","code":"do_derive(   site,   pattern1 = \"mica\",   pattern2 = NULL,   metrics = c(\"NDVI\", \"NDRE\"),   window = 3 )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_derive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create derived variables such as NDVI and NDRE — do_derive","text":"site One site names, using 3 letter abbreviation. running batch mode, named site run separate job. pattern1 File names, portable names, regex matching either, search names selecting source derived variables. See Image naming README details. See details. pattern2 second pattern vector layer names, used bivariate metrics. See details. metrics list metrics apply. Univariate metrics include: NDVI Normalized difference vegetation index, (NIR - red) / (NIR + red), index biomass NDWIg Normalized difference water index (green, commonly known McFeeter's NDWI), (green - NIR) / (green + NIR), primarily helps distinguish waterbodies NDRE Normalized difference red edge index, (NIR - RE) / (NIR + RE), index amount chlorophyll plant mean mean band window, size defined window std standard deviation band window, size defined window NDVImean mean NDVI window, size defined window NDVIstd standard deviation NDVI window, size defined window NDWIswir Normalized difference water index (SWIR, commonly known Gao's NDWI), (NIR - SWIR) / (NIR + SWIR), index water content leaves; requires Mica layer pattern1, matched SWIR layer pattern2 delta difference pattern1 pattern2, may useful taking difference late-season early-season DEMs represent vegetation canopy height window Window size mean, std, NDVImean, NDVIstd, cells; windows square, just specify single number. Bonus points remember make odd.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit models — do_fit","title":"Fit models — do_fit","text":"Fit models","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit models — do_fit","text":"","code":"do_fit(   fitid,   sites,   name,   method,   vars,   exclude_vars,   exclude_classes,   max_samples,   years,   minscore,   maxmissing,   max_miss_train,   top_importance,   holdout,   auc,   hyper,   rep = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit models — do_fit","text":"fitid Fit id fits database sites Data frame site (3 letter code), site_name (long name), datafile (resolved path filename datafile). Sites, paths, filenames vetted fit - checking . name Optional model name method One rf Random Forest, boost AdaBoost. Default = rf. vars optional vector variables restrict analysis . Default = {*}, variables. vars processed find_orthos, may include file names, portable names, search names regular expressions file portable names. exclude_vars optional vector variables exclude. vars, variables processed find_orthos exclude_classes optional numeric vector subclasses exclude max_samples Maximum number samples use - subsample necessary years optional vector years restrict variables minscore Minimum score orthos. Files minimum score less excluded results. Default 0, rejected orthos always excluded. maxmissing Maximum percent missing orthos. Files percent missing greater excluded. max_miss_train Maximum proportion missing training points allowed variable dropped top_importance Number variables keep variable importance holdout Proportion points hold . Random Forest, specifies size single validation set, boosting, size testing validation sets. auc TRUE, calculate class probabilities can calculate AUC hyper Hyperparameters defined rep Throwaway argument make slurmcollie happy","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_gather.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect raster data for each site — do_gather","title":"Collect raster data for each site — do_gather","text":"Clip site boundary, resample align standard resolution. internal function, called gather.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_gather.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect raster data for each site — do_gather","text":"","code":"do_gather(   site,   pattern = \"\",   update,   check,   field,   ignore_bad_classes,   replace_caches )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_gather.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect raster data for each site — do_gather","text":"site site, using 3 letter abbreviation pattern Regex filtering rasters, case-insensitive. Default = \"\" (match ). Note: files ending .tif included case. Examples: match Mica orthophotos, use mica_orth match Mica files July, use Jun.*mica match Mica files series dates, use 11nov20.*mica|14oct20.*mica update TRUE, process new files, assuming existing files good; otherwise, process files replace existing ones. check TRUE, just check see source directories files exist, cache process anything field TRUE, download process field transects already exist. Deal overlaps shapefile–one subclass erased. shapefile downloaded reference, raster corresponding standard created. ignore_bad_classes TRUE, throw error classes ground truth shapefile occur classes.txt. use paying careful attention, bad classes crash do_map line. replace_caches TRUE, cached images (used screen) replaced","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_gather.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Collect raster data for each site — do_gather","text":"Hanging issues SFTP SFTP implementations behave differently revise NAS running. Windows dates mess DST. Hopefully Linux . running Unity, request 20 GB. using just 16 GB, fail quietly default 8 GB.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce geoTIFF maps of predicted vegetation cover from fitted models — do_map","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — do_map","text":"Console command launch prediction run via do_map, typically batch job Unity.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — do_map","text":"","code":"do_map(site, fitid, fitfile, clip, result, mapid, rep = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — do_map","text":"site Three letter site code. fitting fit id built single site, may omit site map site (common situation). want map sites site model built , model built multiple sites, site required. fitid id fits database (NULL specified) fitfile Full specification RDS file fit object clip Optional clip, vector xmin, xmax, ymin, ymax result Result file name mapid Id maps database rep Throwaway argument make slurmcollie happy","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_map.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — do_map","text":"Side effects: writes geoTIFF, <result>.tif , run info file <runinfo>.RDS, following: Time taken run (s) Maximum memory used (GB) Raster size (M pixel) R error, NULL success Requires rasterPrep. Install : remotes::install_github('ethanplunkett/rasterPrep')","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_mosaic.html","id":null,"dir":"Reference","previous_headings":"","what":"Combines multiple maps, filling in missing data — do_mosaic","title":"Combines multiple maps, filling in missing data — do_mosaic","text":"general, models using predictors better performance, trade-, including predictors missing data lead missing areas resulting maps. Mosaic mitigates problem combining multiple maps. Missing values first map replaced values second map, missing values first two maps replaced third, . new composite map data cells source maps data.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_mosaic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combines multiple maps, filling in missing data — do_mosaic","text":"","code":"do_mosaic(mapids)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_mosaic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combines multiple maps, filling in missing data — do_mosaic","text":"mapids Vector two map ids process, preferred maps listed less-preferred ones","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_mosaic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Combines multiple maps, filling in missing data — do_mosaic","text":"shapefile produced map id, fit id, CCR, Kappa underlying cells. Maps must site.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample Y and X variables for a site — do_sample","title":"Sample Y and X variables for a site — do_sample","text":"Sample imagery site create rectangular data files model fitting. internal function, called sample.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample Y and X variables for a site — do_sample","text":"","code":"do_sample(   site,   pattern,   n,   p,   d,   classes,   minscore,   maxmissing,   balance,   balance_excl,   result,   transects,   drop_corr,   reuse )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample Y and X variables for a site — do_sample","text":"site site, using 3 letter abbreviation pattern File names, portable names, regex matching either, search names selecting files sample. See Image naming README details.W n Number total samples return. p Proportion total samples return. Use p = 1 sample . d Mean distance cells samples. minimum spacing guaranteed. classes Class vector classes transects sample. Default classes. minscore Minimum score orthos. Files minimum score less excluded results. Default 0, rejected orthos always excluded. maxmissing Maximum percent missing orthos. Files percent missing greater excluded. balance TRUE, balance number samples class. Points randomly selected match sparsest class. balance_excl Vector classes exclude determining sample size balancing. Include classes low samples care much . result Name result file. specified, file constructed site, number X vars, strategy. transects Name transects file; default transects. drop_corr Drop one pair variables correlation drop_corr. reuse Reuse named file (ending _all.txt) previous run, rather resampling. Saves whole lot time changing n, p, d, balance, balance_excl, drop_corr. ** implemented yet! **","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_sample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample Y and X variables for a site — do_sample","text":"Sampled data table (invisibly)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/do_sample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sample Y and X variables for a site — do_sample","text":"Memory requirements: measured 28.5 GB.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/dot-onLoad.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize user parameters when the package is loaded — .onLoad","title":"Initialize user parameters when the package is loaded — .onLoad","text":"Initialize user parameters package loaded","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/dot-onLoad.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize user parameters when the package is loaded — .onLoad","text":"","code":".onLoad(libname, pkgname)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/dot-onLoad.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize user parameters when the package is loaded — .onLoad","text":"libname (required R; used) pkgname (required R; used)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/drive_walk_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","title":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","text":"far, far faster using drive_get drive_ls deep path drive LOTS files.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/drive_walk_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","text":"","code":"drive_walk_path(path)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/drive_walk_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","text":"path drive path Google Drive","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/drive_walk_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","text":"dribble full path. Returns NULL directory exist.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/drive_walk_path.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Walk down a file path a folder at a time in the currently Google Drive — drive_walk_path","text":"following takes 6-7 min Google Drive, ~16,000 files drive_ls(path = 'UAS Data Collection/Westport/RFM Processing Inputs/Orthomosaics/') call takes 6 seconds drive_walk_path(path = 'UAS Data Collection/Westport/RFM Processing Inputs/Orthomosaics/')","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/extent_area.html","id":null,"dir":"Reference","previous_headings":"","what":"Give the area of a clip vector — extent_area","title":"Give the area of a clip vector — extent_area","text":"Give area clip vector","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/extent_area.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Give the area of a clip vector — extent_area","text":"","code":"extent_area(clip, units = \"ha\", crs = \"epsg:4326\")"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/extent_area.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Give the area of a clip vector — extent_area","text":"clip Vector xmin, xmax, ymin, ymax units Area units return crs Coordinate reference system clip","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/filter_db.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter fits database — filter_db","title":"Filter fits database — filter_db","text":"Filter fits database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/filter_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter fits database — filter_db","text":"","code":"filter_db(filter, database)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/filter_db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter fits database — filter_db","text":"filter Specify fits one : vector ids '' fits named list filter fits. List items <field fits database> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. database Name database, either fdb mdb","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/filter_db.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter fits database — filter_db","text":"vector rows numbers selected database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/find_orthos.html","id":null,"dir":"Reference","previous_headings":"","what":"Find orthophotos for a site — find_orthos","title":"Find orthophotos for a site — find_orthos","text":"Finds orthophotos given site complete file names, portable names, search names, regular expressions match file names portable names. may mixed matched, separated +. function primarily used internally, may use test refine orthoimage designations.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/find_orthos.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find orthophotos for a site — find_orthos","text":"","code":"find_orthos(site, descrip, minscore = 0, maxmissing = 20, screen = TRUE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/find_orthos.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find orthophotos for a site — find_orthos","text":"site Vector one site names descrip Character string one following, separated +: file name complete file name (.tif optional) portable name portable name regex regular expression enclosed {}, applied file names portable names. Regular expressions case-insensitive. search name search string (see search_names details) minscore Minimum score orthos. Files minimum score less excluded results. Default 0, rejected orthos always excluded. maxmissing Maximum percent missing orthos. Files percent missing greater excluded. screen TRUE, use minscore maxmissing screen results; ignore FALSE (needed do_map, always want use variables included model, even scores changed)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/find_orthos.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find orthophotos for a site — find_orthos","text":"Data frame row row numbers flights<site>.txt file file names portable portable names","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/find_orthos.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find orthophotos for a site — find_orthos","text":"Note portable names filtered one result unique portable name. duplicate portable names site, filtering picks portable name highest score, breaking ties picking earliest day season. Filtering applied exact matches portable names, matched regex. File names search names give multiple matches filtered. Use descrip = '{*}' match names. may pass one site name, case sites searched. case, returned portable names useful result.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Build statistical models of vegetation cover — fit","title":"Build statistical models of vegetation cover — fit","text":"Given one sites model specification, builds model vegetation cover report model assessment.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build statistical models of vegetation cover — fit","text":"","code":"fit(   site = NULL,   datafile = \"data\",   name = \"\",   method = \"rf\",   vars = \"{*}\",   exclude_vars = \"\",   exclude_classes = NULL,   max_samples = NULL,   years = NULL,   minscore = 0,   maxmissing = 20,   max_miss_train = 0.2,   top_importance = 20,   holdout = 0.2,   auc = FALSE,   hyper = NULL,   resources = NULL,   local = FALSE,   trap = TRUE,   comment = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build statistical models of vegetation cover — fit","text":"site Three letter site code, vector site names fitting multiple sites datafile Name data file. must .RDS file, exclude extension. fitting multiple sites, either use single datafile name shared among sites, vector matching site. name Optional model name method One rf Random Forest, boost AdaBoost. Default = rf. vars optional vector variables restrict analysis . Default = {*}, variables. vars processed find_orthos, may include file names, portable names, search names regular expressions file portable names. exclude_vars optional vector variables exclude. vars, variables processed find_orthos exclude_classes optional numeric vector subclasses exclude max_samples Maximum number samples use - subsample necessary years optional vector years restrict variables minscore Minimum score orthos. Files minimum score less excluded results. Default 0, rejected orthos always excluded. maxmissing Maximum percent missing orthos. Files percent missing greater excluded. max_miss_train Maximum proportion missing training points allowed variable dropped top_importance Number variables keep variable importance holdout Proportion points hold . Random Forest, specifies size single validation set, boosting, size testing validation sets. auc TRUE, calculate class probabilities can calculate AUC hyper Hyperparameters. defined. resources Slurm launch resources. See launch. take priority function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional launch / slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit_finish.html","id":null,"dir":"Reference","previous_headings":"","what":"Finish fit run — fit_finish","title":"Finish fit run — fit_finish","text":"Finish fit run: Populate fits database slurmcollie stats info zz_<id>_fit.RDS, written do_fit Copy log file models directory","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit_finish.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finish fit run — fit_finish","text":"","code":"fit_finish(jobid, status)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fit_finish.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finish fit run — fit_finish","text":"jobid Job id finish status Job status","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitinfo.html","id":null,"dir":"Reference","previous_headings":"","what":"Display information on model fits — fitinfo","title":"Display information on model fits — fitinfo","text":"Display model specification, assessment, run statistics.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitinfo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display information on model fits — fitinfo","text":"","code":"fitinfo(   rows = \"all\",   cols = \"normal\",   report = NULL,   sort = \"id\",   decreasing = FALSE,   nrows = NA,   include_model = FALSE,   quiet = FALSE,   purged = FALSE,   timezone = \"America/New_York\" )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitinfo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Display information on model fits — fitinfo","text":"rows Selected rows fits database. Use one vector fitids '' fits named list filter fits. List items <field fdb> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. cols Selected columns display. Use one brief (1) normal (2) long (3) (4) 1, 2, 3, 4 shortcut column sets vector column names include Note model, full_model, hyper normally omitted display, tend really long uninformative. want see , include explicitly cols, use cols = '' include_model = TRUE include three . report TRUE, give report (single fit); otherwise, list info fits. rows numeric scalar, report defaults TRUE; otherwise FALSE. sort name column used sort table decreasing TRUE, sort descending order nrows Number rows display table. Positive numbers display first n rows, negative numbers display last n rows. Use nrows = NA display rows. include_model TRUE, explicitly exclude model, full_model, hyper cols = '' quiet TRUE, print anything, just returns values purged TRUE, display info purged database rather live one timezone Time zone launch time; use NULL leave times native UTC","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitinfo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Display information on model fits — fitinfo","text":"fit table assessment, invisibly","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitinfo.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Display information on model fits — fitinfo","text":"fitinfo works two different modes: fitinfo(rows = <selected rows>, cols = <selected columns>) displays table selected rows columns fitinfo(rows = <single row>) fitinfo(rows = ..., report = TRUE) displays report selected fit id, focusing model assessment (information fit log)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitpurge.html","id":null,"dir":"Reference","previous_headings":"","what":"Purge selected fits from fits database — fitpurge","title":"Purge selected fits from fits database — fitpurge","text":"Cleans fits database unwanted fits, well cleaning sidecar files. Purges always reversible.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitpurge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Purge selected fits from fits database — fitpurge","text":"","code":"fitpurge(rows = NULL, failed = FALSE, undo = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitpurge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Purge selected fits from fits database — fitpurge","text":"rows Selected rows fits database. Use one empty string purge fits, purge stray fit files vector fitids purge fits named list filter fits. List items <field fdb> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. failed TRUE, fits success FALSE NA purged. alternative specifying rows. undo Undo previous purges. time limit undoing, matter whether run fits since purge. may supply either: undo = 'last', reverses previous purge call, database associated files restored. Call fitpurge(undo = 'last') repeatedly roll back farther. vector fit ids corresponding previously purged fits. Note may view purged fits fitinfo(..., purged = TRUE).","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitpurge.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Purge selected fits from fits database — fitpurge","text":"Purged rows fits database saved databases/purged/fdb_purged.RDS, associated files moved models/purged/. stray fit sidecar files (fit_0000_extra.RDS, fit_0000.log, zz_0000_fit.RDS) also purged. can undo previous purges unpurge specific fits undo. Use fitinfo(..., purged = TRUE) view purged fits. hurting disk space, fair game delete databases/purged/fdb_purged.RDS files models/purged/. prevent recovering purged fits, course.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitset.html","id":null,"dir":"Reference","previous_headings":"","what":"Set model scores and comments — fitset","title":"Set model scores and comments — fitset","text":"  sets subjective model fit score, assessment. comment, map comment. may combined single call. Note can use fitset multiple fits, need use multiple = TRUE.","code":"fitset(rows = <a single row>, score = <fit score>) fitset(rows = <a single row>, assess = 'an assessment comment') fitset(rows = <a single row>, map = 'a map comment')"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set model scores and comments — fitset","text":"","code":"fitset(rows, score = NULL, assess = NULL, map = NULL, multiple = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fitset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set model scores and comments — fitset","text":"rows Selected rows fits database. Use one vector fitids '' fits named list filter fits. List items <field fdb> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. score Set subjective model score fits database. may numeric character; 'll treated character. assess Sets assessment comment fits database map Sets map comment fits database multiple TRUE, allows applying multiple fits","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fix_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Fix errors and inconsistencies in orthophoto file names — fix_names","title":"Fix errors and inconsistencies in orthophoto file names — fix_names","text":"File names salt marsh project number errors inconsistencies, example, \"Jun\" \"June\" used names. function cleans file names prior building orthophoto database seasons, sensors, etc. can extracted without trouble. file names changed disk.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fix_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fix errors and inconsistencies in orthophoto file names — fix_names","text":"","code":"fix_names(files)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fix_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fix errors and inconsistencies in orthophoto file names — fix_names","text":"files Vector file names","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fix_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fix errors and inconsistencies in orthophoto file names — fix_names","text":"Vector cleaned-file names","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/fix_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fix errors and inconsistencies in orthophoto file names — fix_names","text":"Set name reassignments pars.yaml. Reassignments case-sensitive (filenames case-sensitive general, want keep reassignments narrow). part name matches changed, take care. Reassignments look like , substring replace left, new substring right:   change orthophoto named x01Sept20_RR_MidOut_Zenmuse_Ortho.tif x01Sep20_Red_Mid_Out_X3_Ortho.tif.","code":"fixnames:   - June: Jun              # dates should be 3 letters   - Sept: Sep   - RR: Red                # site with inconsistent naming   - Zenmuse: X3            # sensor with multiple names   - MidOut: Mid_Out        # tide stage with a modifier needs separation   - MidIn: Mid_In"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Create missing our outdated cached images for screen() — flights_cache","title":"Create missing our outdated cached images for screen() — flights_cache","text":"Create missing outdated cached images screen()","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create missing our outdated cached images for screen() — flights_cache","text":"","code":"flights_cache(site, replace_caches = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create missing our outdated cached images for screen() — flights_cache","text":"site site, using 3 letter abbreviation replace_caches TRUE, cached images (used screen) replaced","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_image.html","id":null,"dir":"Reference","previous_headings":"","what":"Create cached images of orthophotos for display in screen — flights_image","title":"Create cached images of orthophotos for display in screen — flights_image","text":"Create cached images orthophotos display screen","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_image.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create cached images of orthophotos for display in screen — flights_image","text":"","code":"flights_image(data, cdir, file, rgb, extent, footprint, pixels = 1200)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_image.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create cached images of orthophotos for display in screen — flights_image","text":"data raster ortho image cdir cache directory file File name write cache rgb RGB bands, order (reversed Mica) extent Extent image; one full, inset1, inset2 footprint footprint shapefile object pixels Maximum resolution pixels","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_prep.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare flights data after gather — flights_prep","title":"Prepare flights data after gather — flights_prep","text":"Run gather, Gets percent missing ortho (checks updated orthos missing_filestamp flights database) Makes raster number orthos missing value cell (redoes orthos change) Gets number bands ortho Caches images screen (checks see images outdated respect orthos) flights database updated accordingly.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_prep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare flights data after gather — flights_prep","text":"","code":"flights_prep(site, replace_caches = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_prep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare flights data after gather — flights_prep","text":"site site, using 3 letter abbreviation replace_caches TRUE, cached images (used screen) replaced","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce reports on orthoimages for all sites — flights_report","title":"Produce reports on orthoimages for all sites — flights_report","text":"Produce reports orthoimages, including site summaries, files flagged repair, duplicated portable names, files site","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce reports on orthoimages for all sites — flights_report","text":"","code":"flights_report()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/flights_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Produce reports on orthoimages for all sites — flights_report","text":"site report series text files. Summary orthos site, stats frequency tables site. Unformatted text file, suitable viewing text editor. List orthos flagged repair. Tab-delimited text file columns site, name, score, comment. Best viewed Excel read R. List duplicated portable names. Tab-delimited text file columns site, portable, name, pick (* selected images), dups, season, score. Best viewed Excel read R. List orthos. Tab-delimited text file columns site, portable, name, type, sensor, derive, window, tide, tidemod, season, year, score, repair.  Best viewed Excel read R. Files written reports/ directory.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather.html","id":null,"dir":"Reference","previous_headings":"","what":"Gather and prepare GIS data from data sources — gather","title":"Gather and prepare GIS data from data sources — gather","text":"Gather raster vector data source (either Google Drive SFTP), clip site boundary, resample align standard resolution. Data copied various source locations (orthophotos, DEMs, canopy height models). Robust crashes interruptions: cached datasets fully downloaded used re-downloading, processed rasters re-processed unless update = TRUE replace = TRUE.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gather and prepare GIS data from data sources — gather","text":"","code":"gather(   site,   pattern = \"\",   update = TRUE,   check = FALSE,   field = TRUE,   ignore_bad_classes = FALSE,   replace_caches = FALSE,   resources = NULL,   local = FALSE,   trap = TRUE,   comment = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gather and prepare GIS data from data sources — gather","text":"site One site names, using 3 letter abbreviation. Use process sites. batch mode, named site run separate job. pattern Regex filtering rasters, case-insensitive. Default = \"\" (match ). Note: files ending .tif included case. Examples: match Mica orthophotos, use mica_orth match Mica files July, use Jun.*mica match Mica files series dates, use 11nov20.*mica|14oct20.*mica update TRUE, process new files, assuming existing files good; otherwise, process files replace existing ones. check TRUE, just check see source directories files exist, cache process anything field TRUE, download process field transects already exist. shapefile downloaded reference, raster corresponding standard created. ignore_bad_classes TRUE, throw error classes ground truth shapefile occur classes.txt. use paying careful attention, bad classes crash do_map line. replace_caches TRUE, cached images (used screen) replaced resources Slurm launch resources. See launch. take priority #'    function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Gather and prepare GIS data from data sources — gather","text":"Additional parameters, set gather block pars.yml (see init()): sourcedrive one local, google, sftp local - read source local drive google - get source data currently connected Google Drive (login via browser first connection) cache locally. Must set cachedir option. sftp - get source data SFTP site. Must set sftp cachedir options. sourcedir directory source rasters, generally Google Drive SFTP site subdirs subdirectories search, ending slash. Default = orthos, DEMs, canopy height models (okay include empty nonexistent directories). Use <site> subdirectories include site name, e.g., <site> Share/Photogrammetry DEMs. WARNING: paths Google Drive case-sensitive! transects directory field transect shapefile exclude list geoTIFFs exclude, whatever reasons. Note files beginning bad also excluded sftp list(url = <address site>, user = <credentials>). Credentials either username:password *filename username:password. Make sure include credential files .gitignore .Rbuildignore end world! Source data: geoTIFFs site sites file, table site abbreviation, site name, footprint shapefile, raster standard, transect shapefile. Results: flights/geoTIFFs, clipped, resampled, aligned. Make sure closed ArcGIS/QGIS projects point running! models/gather_data.log source data expected EPSG:4326. Non-conforming rasters reprojected. sites.txt must include name footprint shapefile site, field transect shapefile, standard geoTIFF site. footprint used clipping must present. transect contains ground truth data, must present field = TRUE. standard must present. used standard grain alignment; rasters resampled match. Standards MUST standard projection, EPSG:4326. Best use Mica orthophoto, 8 cm resolution. Note adding existing stack using different standard lead sorrow. BEST PRACTICE: change standards standards.txt; must change , clear flights/ directory rerun. reading Google Drive SFTP, need cache. Best put Unity scratch drive. Create ws_allocate cache 30 Unity shell. can extend scratch drive (5 times) ws_extend cache 30. done , polite release ws_release cache. need point cache ~/pars.yml, scratchdir:. Note initial runs Google Drive session open browser authentication wait input console, run blindly using Google Drive end run, log file copied flights directory. Remember SFTP servers require connection via VPN Example runs: Complete sites:   Run one site, June :   Run 2 sites, low tide :","code":"`gather('all')` `gather(site = 'oth', pattern = 'Jun')` `gather(site = c('oth', 'wes'), pattern = '_low_')`"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather_finish.html","id":null,"dir":"Reference","previous_headings":"","what":"Finish gather run — gather_finish","title":"Finish gather run — gather_finish","text":"Copies log file flights directory","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather_finish.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finish gather run — gather_finish","text":"","code":"gather_finish(jobid, status)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/gather_finish.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finish gather run — gather_finish","text":"jobid Job ids finish status Job status","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_NAflag.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns the NAflag for a SpatRaster, making one up if it's not defined — get_NAflag","title":"Returns the NAflag for a SpatRaster, making one up if it's not defined — get_NAflag","text":"Returns NAflag SpatRaster, making one defined","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_NAflag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns the NAflag for a SpatRaster, making one up if it's not defined — get_NAflag","text":"","code":"get_NAflag(rast)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_NAflag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns the NAflag for a SpatRaster, making one up if it's not defined — get_NAflag","text":"rast SpatRaster object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_NAflag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns the NAflag for a SpatRaster, making one up if it's not defined — get_NAflag","text":"existing assigned NAflag","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Return directory listing as a data frame from the local drive, Google Drive, or SFTP site — get_dir","title":"Return directory listing as a data frame from the local drive, Google Drive, or SFTP site — get_dir","text":"sister function get_file","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return directory listing as a data frame from the local drive, Google Drive, or SFTP site — get_dir","text":"","code":"get_dir(path, sourcedrive = \"local\", sftp)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return directory listing as a data frame from the local drive, Google Drive, or SFTP site — get_dir","text":"path directory path (must end '/' Google Drive) sourcedrive one local, google, sftp sftp list url = address site, user = credentials (optional)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_dir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Return directory listing as a data frame from the local drive, Google Drive, or SFTP site — get_dir","text":"Returns data frame name (filenames), id (Google Drive id, sourcedrive = google`) sourcedrive = local name full path local files sourcedrive = google, name just base name sourcedrive = sftp, name full path files SFTP site directories found, throw error Notes: paths Google Drive case-sensitive initial runs Google Drive session open browser authentication wait input console, run blindly using Google Drive SFTP directory info crazy. Apparently format highly platform-dependent. targeted use running Unity / fetching files SFTP NAS yet, revisit tailor specific platforms. testing laptop / fetching files via SFTP Landscape Ecology cluster, found two date issues: Seconds truncated. adding one minute date checks fail. seems safe assume source files updated within minute downloading . Strangely, summer dates reported differently xplorer2 DOS/Command Prompt (1:12 pm) vs. Win Explorer, FileZilla, code (2:12 pm). Absolutely crazy. final setup, Linux servers sides hopefully 'll clear .","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Return a file name from the local drive, Google Drive, or SFTP — get_file","title":"Return a file name from the local drive, Google Drive, or SFTP — get_file","text":"reading Google Drive SFTP, file cached scratch drive (gd$cache), reused long outdated. Get gd$dir sister function get_dir.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return a file name from the local drive, Google Drive, or SFTP — get_file","text":"","code":"get_file(name, gd)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return a file name from the local drive, Google Drive, or SFTP — get_file","text":"name File path name gd Source drive info, named list dir - Google directory info, get_dir sourcedrive - source drive (local, google, sftp) sftp - list(url, user) cachedir - local cache directory","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Return a file name from the local drive, Google Drive, or SFTP — get_file","text":"path file local drive","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_file.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Return a file name from the local drive, Google Drive, or SFTP — get_file","text":"Notes: code assumes files unique names, even different directories. holds true UAS salt marsh project, good enough. *** REPURPOSING CODE, beware! *** cached files reused outdated. Downloads Google Drive SFTP Unity wicked fast, feel bad freeing scratch drive run. polite thing . check full cache drive, Unity scratch drive 50 TB limit < 1 TB data. , REPURPOSING, beware! protect crashed interrupted downloads downloading temporary file renamed completion. reading SFTP, entire file must able fit memory. plenty room files salt marsh project. files remote drive treated case-insensitive","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_flights_db.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the flights database for a site — get_flights_db","title":"Get the flights database for a site — get_flights_db","text":"Get flights database site","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_flights_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the flights database for a site — get_flights_db","text":"","code":"get_flights_db(site, noerror = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_flights_db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the flights database for a site — get_flights_db","text":"site single site name (3 letter code), already vetted noerror TRUE, return NULL instead error","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_flights_db.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the flights database for a site — get_flights_db","text":"flights database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_rast.html","id":null,"dir":"Reference","previous_headings":"","what":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","title":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","text":"image geoTIFFs Salt Marsh project NAflag set, leading trouble downstream. function reads raster Google Drive, SFTP, local drive, NAflag set, comes NAflag based data type raster, (commonly use, 255 unsigned bytes 65535 unsigned 32-bit integers) sets values NA.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_rast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","text":"","code":"get_rast(name, gd)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_rast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","text":"name File path name gd Source drive info, named list dir - Google directory info, get_dir sourcedrive - source drive (local, google, sftp) sftp - list(url, user) cachedir - local cache directory","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_rast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","text":"list : rast raster object type data type object missing NA value object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_rast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A wrapper for rast(get_file) that sets missing values to NA — get_rast","text":"See get_file info.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_sites.html","id":null,"dir":"Reference","previous_headings":"","what":"Get info for one or more sites — get_sites","title":"Get info for one or more sites — get_sites","text":"Get info one sites","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_sites.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get info for one or more sites — get_sites","text":"","code":"get_sites(site)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_sites.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get info for one or more sites — get_sites","text":"site One site names, using 3 letter abbreviation. Use process sites.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/get_sites.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get info for one or more sites — get_sites","text":"site Data frame one rows : site Standard 3 letter site abbreviation site_name Site name share Share name Google Drive   obsolete? transects name ground truth shapefile balance_exclude list classes exclude balancing sample (comma-separated) fit_exclude list classes exclude fit (comma-separated) footprint path name footprint shapefile standard path name orthophoto standard (use  variable include site name path)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/init.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize marshmap with user parameters — init","title":"Initialize marshmap with user parameters — init","text":"Reads user-set parameters package marshmap.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/init.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize marshmap with user parameters — init","text":"","code":"init()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/init.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Initialize marshmap with user parameters — init","text":"User parameters set two distinct locations: initialization file, user's home directory, ~/marshmap.yml. file contain five lines: basedir: c:/Work/etc/marshmap parsdir: pars parsfile: pars.yml scratchdir: c:/Work/etc/marshmap/data/scratch . basedir points base directory b. parsdir parameters subdirectory. pars unless good reason change . c. parsfile points main parameter file. pars.yml. d. scratchdir points scratch drive, cache directory located. See notes caching, . Everything else, <basedir>/<parsdir>. primary parameter file pars.yml, points parameters (sites.txt). parameters include: sites name sites file, sites.txt default classes name classes file, classes.txt default dirs alternative names various subdirectories. directories keep standard structure–can change names paths. gather block parameters gather() approach splits user- platform-dependent parameters (marshmap.yml) parameters likely shared among users across platforms (parsdir). allows multiple users shared machine (Unity cluster) set user-specific parameters need , sharing parameters. function reads user parameters adds environment parameters. automatically run upon loading package, may rerun user parameter files changed. can change standard directory names (data, models, gis, flights, field, shapefiles, samples, predicted, cache) setting within dirs: block pars.yml. Directories default standard names, usually want. change parameters fly, can set components . change elements dirs, run set_dirs() afterwards. Note parameters changed fly persist next call init(), can called demand also happens automatically package loaded. example: $sites <- 'newsites'  $dirs$cache <- 'newcache' $dirs$samples <- 'samples99' set_dirs() Notes caching. cache directory required sourcedrive = google sftp. cache directory larger total amount data processed–code quota management. issue using scratch drive Unity, limit 50 TB. great need carry cached data long periods, downloading Google SFTP Unity fast. polite release scratch workspace done. See comments get_file() notes caching.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/load_database.html","id":null,"dir":"Reference","previous_headings":"","what":"Load the specified database unless we've already got it — load_database","title":"Load the specified database unless we've already got it — load_database","text":"Loads database directory $dbdir environment .","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/load_database.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load the specified database unless we've already got it — load_database","text":"","code":"load_database(database, purged = FALSE, lock = TRUE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/load_database.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load the specified database unless we've already got it — load_database","text":"database Name database (fdb model fit database, mdb map database) purged TRUE, loads purged version database lock TRUE, gets lock database (*** implemented)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/load_database.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load the specified database unless we've already got it — load_database","text":"model fit database, fdb, file last_fit_id.txt read get model sequence empty databases, ids never reused. file found, use max id fdb 1000 last resort, display warning.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce geoTIFF maps of predicted vegetation cover from fitted models — map","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — map","text":"Console command launch prediction run via do_map, typically batch job Unity.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — map","text":"","code":"map(   fit,   site = NULL,   clip = NULL,   result = NULL,   resources = NULL,   local = FALSE,   trap = FALSE,   comment = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produce geoTIFF maps of predicted vegetation cover from fitted models — map","text":"fit Fit id fits database, fit object, path .RDS fit object site Three letter site code. fitting fit id built single site, may omit site map site (common situation). want map sites site model built , model built multiple sites, site required. clip Optional clip, vector xmin, xmax, ymin, ymax result Optional result name. Default map_<site>_<fit id>_[clip_<size>_ha]; result name specified, result map_<result>_<site>_<fit id>_[clip_<size>_ha], retaining site fit id, omitting breaks ability track maps back fits based . resources Slurm launch resources. See launch. take priority function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional launch / slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map_finish.html","id":null,"dir":"Reference","previous_headings":"","what":"Finish do_map run, updating maps database — map_finish","title":"Finish do_map run, updating maps database — map_finish","text":"Finish do_map run, updating maps database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map_finish.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finish do_map run, updating maps database — map_finish","text":"","code":"map_finish(jobid, status)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/map_finish.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finish do_map run, updating maps database — map_finish","text":"jobid slurmcollie job id status Job status","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mapinfo.html","id":null,"dir":"Reference","previous_headings":"","what":"Display information on maps — mapinfo","title":"Display information on maps — mapinfo","text":"Display map specification run statistics.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mapinfo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display information on maps — mapinfo","text":"","code":"mapinfo(   rows = \"all\",   cols = \"normal\",   sort = \"mapid\",   decreasing = FALSE,   nrows = NA,   quiet = FALSE,   purged = FALSE,   timezone = \"America/New_York\" )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mapinfo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Display information on maps — mapinfo","text":"rows Selected rows maps database. Use one vector mapids '' maps named list filter maps. List items <field mdb> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. cols Selected columns display. Use one brief (1) normal (2) long (3) (4) 1, 2, 3, 4 shortcut column sets vector column names include sort name column used sort table decreasing TRUE, sort descending order nrows Number rows display table. Positive numbers display first n rows, negative numbers display last n rows. Use nrows = NA display rows. quiet TRUE, print anything, just returns values purged TRUE, display info purged database rather live one timezone Time zone launch time; use NULL leave times native UTC","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mapinfo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Display information on maps — mapinfo","text":"model table, invisibly","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mappurge.html","id":null,"dir":"Reference","previous_headings":"","what":"Purge selected maps from maps database — mappurge","title":"Purge selected maps from maps database — mappurge","text":"Cleans maps database unwanted maps, well cleaning sidecar files. Purges always reversible.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mappurge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Purge selected maps from maps database — mappurge","text":"","code":"mappurge(rows = NULL, failed = FALSE, undo = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mappurge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Purge selected maps from maps database — mappurge","text":"rows Selected rows maps database. Use one empty string purge maps, purge stray map files vector mapids purge maps named list filter maps. List items <field mdb> = <value>, <value> regex character fields, actual value (vector values) logical numeric fields. failed TRUE, maps success FALSE NA purged. alternative specifying rows. undo Undo previous purges. time limit undoing, matter whether run maps since purge. may supply either: undo = 'last', reverses previous purge call, database associated files restored. Call mappurge(undo = 'last') repeatedly roll back farther. vector map ids corresponding previously purged maps. Note may view purged maps mapinfo(..., purged = TRUE).","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mappurge.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Purge selected maps from maps database — mappurge","text":"Purged rows maps database saved databases/purged/mdb_purged.RDS, associated files moved databases/purged/. can undo previous purges unpurge specific maps undo. Use mapinfo(..., purged = TRUE) view purged maps. hurting disk space, fair game delete databases/purged/mdb_purged.RDS files databases/purged/. prevent recovering purged maps, course. want purging maps delete TIFFs?!","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mosaic.html","id":null,"dir":"Reference","previous_headings":"","what":"Combines multiple maps, filling in missing data — mosaic","title":"Combines multiple maps, filling in missing data — mosaic","text":"general, models using predictors better performance, trade-, including predictors missing data lead missing areas resulting maps. Mosaic mitigates problem combining multiple maps. Missing values first map replaced values second map, missing values first two maps replaced third, . new composite map data cells source maps data.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mosaic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combines multiple maps, filling in missing data — mosaic","text":"","code":"mosaic(mapids, resources = NULL, local = FALSE, trap = FALSE, comment = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mosaic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combines multiple maps, filling in missing data — mosaic","text":"mapids Vector two map ids process, preferred maps listed less-preferred ones resources Slurm launch resources. See launch. take priority function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional launch / slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/mosaic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Combines multiple maps, filling in missing data — mosaic","text":"shapefile produced map id, fit id, CCR, Kappa underlying cells. Maps must site.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/new_db.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new database — new_db","title":"Create a new database — new_db","text":"Creates new empty fits database (fdb) maps database (mdb). drastic function, intended used initially creating database existing database hopeless mess. Use great care–function destroy existing database backups. function drastic unrecoverable.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/new_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new database — new_db","text":"","code":"new_db(database, really = FALSE)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/new_db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new database — new_db","text":"database Name database (fdb mdb) really TRUE, creates database, destroying existing database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/overlaps.html","id":null,"dir":"Reference","previous_headings":"","what":"Erase overlapping polys where class field isn't equal — overlaps","title":"Erase overlapping polys where class field isn't equal — overlaps","text":"Erase overlapping polys class field equal","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/overlaps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Erase overlapping polys where class field isn't equal — overlaps","text":"","code":"overlaps(polys, field)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/overlaps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Erase overlapping polys where class field isn't equal — overlaps","text":"polys sf object potential multipolys field Field check overlaps","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/overlaps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Erase overlapping polys where class field isn't equal — overlaps","text":"New sf object overlaps erased unless values field equal","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pick.html","id":null,"dir":"Reference","previous_headings":"","what":"Pick the best image from a portable name — pick","title":"Pick the best image from a portable name — pick","text":"Given portable name flights database, pick image matching portable name highest score. Ties broken picking earliest day season. unlikely event one high-scoring flight first one database arbitrarily chosen.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pick.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pick the best image from a portable name — pick","text":"","code":"pick(portable, db)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pick.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pick the best image from a portable name — pick","text":"portable Portable name find db Flights database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pick.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pick the best image from a portable name — pick","text":"Row database chosen image","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pickvars.html","id":null,"dir":"Reference","previous_headings":"","what":"pick variables based on importance >= n — pickvars","title":"pick variables based on importance >= n — pickvars","text":"pick variables based importance >= n","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pickvars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"pick variables based on importance >= n — pickvars","text":"","code":"pickvars(n, importance = the$fit$import)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/pickvars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"pick variables based on importance >= n — pickvars","text":"n Cutoff value variable importance. importance Variable importance object fit","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/plot_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a predict grid and plot it nicely — plot_predict","title":"Read a predict grid and plot it nicely — plot_predict","text":"Read predict grid plot nicely","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/plot_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a predict grid and plot it nicely — plot_predict","text":"","code":"plot_predict(   tiff = \"C:/Work/etc/saltmarsh/data/oth/predicted/predict_oth_2025-Apr-28_13-54.tif\",   pal = \"ggsci::category20b_d3\" )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/plot_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a predict grid and plot it nicely — plot_predict","text":"tiff predicted geoTIFF pal Selected palette","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/read_pars_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a parameter table — read_pars_table","title":"Read a parameter table — read_pars_table","text":"Given parameter name corresponds tab-delimited file, read return file","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/read_pars_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a parameter table — read_pars_table","text":"","code":"read_pars_table(name)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/read_pars_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a parameter table — read_pars_table","text":"name Parameter name","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/read_pars_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read a parameter table — read_pars_table","text":"Data frame parameter file","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/resolve_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Resolve directory with embedded <site>, <SITE>, <site_name>, or <share> — resolve_dir","title":"Resolve directory with embedded <site>, <SITE>, <site_name>, or <share> — resolve_dir","text":"Resolve directory embedded <site>, <SITE>, <site_name>, <share>","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/resolve_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resolve directory with embedded <site>, <SITE>, <site_name>, or <share> — resolve_dir","text":"","code":"resolve_dir(dir, site, share = \"\")"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/resolve_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resolve directory with embedded <site>, <SITE>, <site_name>, or <share> — resolve_dir","text":"dir Directory path site Site name. Google Drive, use site_name; Unity, use tolower(site), 3 letter code share Share site name. Google Drive, use share","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/resolve_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resolve directory with embedded <site>, <SITE>, <site_name>, or <share> — resolve_dir","text":"Directory path including specified site.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample orthoimages for field-collected data — sample","title":"Sample orthoimages for field-collected data — sample","text":"Sample images points field-collected data, creating data table modeling.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample orthoimages for field-collected data — sample","text":"","code":"sample(   site,   pattern = \"{*}\",   n = NULL,   p = NULL,   d = NULL,   classes = NULL,   minscore = 0,   maxmissing = 20,   balance = TRUE,   balance_excl = NULL,   result = NULL,   transects = NULL,   drop_corr = NULL,   reuse = FALSE,   resources = NULL,   local = FALSE,   trap = TRUE,   comment = NULL )"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample orthoimages for field-collected data — sample","text":"site One site names, using 3 letter abbreviation. Use process sites. batch mode, named site run separate job. pattern File names, portable names, regex matching either, search names selecting files sample. See Image naming README details. default {*}, include variables. n Number total samples return. p Proportion total samples return. Use p = 1 sample . d Mean distance cells samples. minimum spacing guaranteed. classes Class vector classes transects sample. Default classes. minscore Minimum score orthos. Files minimum score less excluded results. Default 0, rejected orthos always excluded. maxmissing Maximum percent missing orthos. Files percent missing greater excluded. balance TRUE, balance number samples class. Points randomly selected match sparsest class. balance_excl Vector classes exclude determining sample size balancing. Include classes low samples care much . Overrides balance_exclude sites.txt supplied. result Name result file. specified, file constructed site, number X vars, strategy. transects Name transects file; default transects. drop_corr Drop one pair variables correlation drop_corr. reuse Reuse named file (ending _all.txt) previous run, rather resampling. Saves whole lot time changing n, p, d, balance, balance_excl, drop_corr. resources Slurm launch resources. See launch. take priority function's defaults. local TRUE, run locally; otherwise, spawn batch run Unity trap TRUE, trap errors local mode; FALSE, use normal R error handling. Use debugging. get unrecovered errors, job added jobs database. effect local = FALSE. comment Optional slurmcollie comment","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sample orthoimages for field-collected data — sample","text":"three mutually exclusive sampling strategies (n, p, d). must choose exactly one. n samples total number points provided. p samples proportion total points (balancing, balance selected. d samples points mean (guaranteed) minimum distance. n, p, d omitted, default p = 0.05, 5% data. Portable names used variable names resulting data files. Dashes modifications changed underscore avoid causing trouble. Results saved four files, plus metadata file: <result>_all.txt - text version full dataset (selected pattern subsetted n, p, d, balance, drop_corr). Readable software. <result>_all.RDS - RDS version full dataset; far faster read text file R (1.1 s vs. 14.4 s one example). <result>.txt - text version final selected subsetted dataset, text file. <result>.RDS - RDS version final dataset. <result>_vars.txt - Lists portable names used variables sample alongside file names disk. disambiguates duplicate portable names flights directory.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_finish.html","id":null,"dir":"Reference","previous_headings":"","what":"Finish sample run — sample_finish","title":"Finish sample run — sample_finish","text":"Copies log file samples directory","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_finish.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finish sample run — sample_finish","text":"","code":"sample_finish(jobid, status)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_finish.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finish sample run — sample_finish","text":"jobid Job ids finish status Job status","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_freq.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a frequency table of number of cells by subclass from field data — sample_freq","title":"Create a frequency table of number of cells by subclass from field data — sample_freq","text":"Create frequency table number cells subclass field data one sites. Results written reports directory sample_freq_<site>.txt.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_freq.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a frequency table of number of cells by subclass from field data — sample_freq","text":"","code":"sample_freq(sites, transects = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_freq.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a frequency table of number of cells by subclass from field data — sample_freq","text":"sites One site names, using 3 letter abbreviation. Use process sites. transects Name transects file; default transects.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/sample_freq.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a frequency table of number of cells by subclass from field data — sample_freq","text":"Always runs locally. Takes minute per site.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_database.html","id":null,"dir":"Reference","previous_headings":"","what":"Save the specified database — save_database","title":"Save the specified database — save_database","text":"Saves database directory $dbdir. Previous versions renamed e.g., fdb_1.RDS, fdb_2.RDS, etc moved backups/. Everything backups/ save purge hurting disk space.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_database.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save the specified database — save_database","text":"","code":"save_database(database)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_database.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save the specified database — save_database","text":"database Name database (fdb model fit database, mdb map database)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_database.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Save the specified database — save_database","text":"model fit database, fdb, $last_fit_id written last_fit_id.txt track highest fit id used, ids never reused.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_flights_db.html","id":null,"dir":"Reference","previous_headings":"","what":"Saves the flights database — save_flights_db","title":"Saves the flights database — save_flights_db","text":"Saves flights database","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_flights_db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Saves the flights database — save_flights_db","text":"","code":"save_flights_db(db, db_name)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/save_flights_db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Saves the flights database — save_flights_db","text":"db Database table db_name Path name database file","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen.html","id":null,"dir":"Reference","previous_headings":"","what":"Visually screen orthoimages via a web app — screen","title":"Visually screen orthoimages via a web app — screen","text":"Used screen images quality, web app allows users view score image, marking images send back repair, entering comments. flights database built first time site visited app. Results saved flights database site, used flights_report. Image scores used help select image use duplicated portable names. Minimum scores may included search names. Rejected images never used fitting.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visually screen orthoimages via a web app — screen","text":"","code":"screen()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Visually screen orthoimages via a web app — screen","text":"screen builds flights database site select site dropdown. alternative running screen call build_fights_db site whenever new images added. Scores may added sites database (flights/flights_<site>.txt) hand necessary. image file updated (presumably downloading repaired image), old image replaced database new one, thus score, repair flag, comments reset. sets assessing repaired images. screen displays selected image red outline indicating site footprint. includes following controls: Site select site. sites listed pars/sites.txt included. full site name displayed, along number scored images, total number images, percent scored. Revisit images. Normally, images scored flagged repair hidden. Turn switch revisit images. (scoring flagging image, hidden changing sites toggling switch.) Image filter enter regular expression filter images either file name portable name (see README description names). filter effect, selected images displayed. Usually, typing distinct portion name suffice, can go crazy regular expressions want. Navigation buttons Jump first, previous, next, last image site. takes couple seconds render high-resolution images. Image info displays image file name, portable name, number bands, key components image (type, sensor, season, year, tide stage). Image Score allows score image quality. Categories unscored, poor, fair, good, good, excellent. Scoring take account amount missing data, image quality, artifacts cloud stripes water reflections. Flag repair marks images repair (instance, stripes usually due cloud cover interleaved transects; image processing software can sometimes remove ). Images flagged repair hidden unless Revisit images selected. Comments Show zooms shows 5x 20x zoom center image -close quality inspection. takes moment. Always show zooms turn always show zoomed insets. Exit saves flights database current site exits (flights databases also saved switching sites).","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_filter.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter/refilter images — screen_filter","title":"Filter/refilter images — screen_filter","text":"Filter/refilter images","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_filter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter/refilter images — screen_filter","text":"","code":"screen_filter(input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_filter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter/refilter images — screen_filter","text":"input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_image.html","id":null,"dir":"Reference","previous_headings":"","what":"Display the current image plus info — screen_image","title":"Display the current image plus info — screen_image","text":"Display current image plus info","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_image.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display the current image plus info — screen_image","text":"","code":"screen_image(score_choices, input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_image.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Display the current image plus info — screen_image","text":"input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_insets.html","id":null,"dir":"Reference","previous_headings":"","what":"Show inset images — screen_insets","title":"Show inset images — screen_insets","text":"Show inset images","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_insets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show inset images — screen_insets","text":"","code":"screen_insets(input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_insets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show inset images — screen_insets","text":"input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_no_site.html","id":null,"dir":"Reference","previous_headings":"","what":"When there's no info for a site, disable controls and blank out info — screen_no_site","title":"When there's no info for a site, disable controls and blank out info — screen_no_site","text":"info site, disable controls blank info","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_no_site.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"When there's no info for a site, disable controls and blank out info — screen_no_site","text":"","code":"screen_no_site(input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_no_site.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"When there's no info for a site, disable controls and blank out info — screen_no_site","text":"input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Display plots for screen — screen_plot","title":"Display plots for screen — screen_plot","text":"Display plots screen","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display plots for screen — screen_plot","text":"","code":"screen_plot(extent, input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Display plots for screen — screen_plot","text":"extent plot show, one full, inset1, inset2 input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_site_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Put together site info message — screen_site_info","title":"Put together site info message — screen_site_info","text":"Put together site info message","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_site_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Put together site info message — screen_site_info","text":"","code":"screen_site_info(sites, input, output, session)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/screen_site_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Put together site info message — screen_site_info","text":"sites Sites table input Shiny input object output Shiny output object session Shiny session object","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Find orthoimages that match search names — search_names","title":"Find orthoimages that match search names — search_names","text":"Processes user-friendly generalized orthoimage search names, mica, swir | ortho | low | summer | 2020:2022, returning list matching category values categories pars.yml. descriptions allow selecting multiple orthoimages clearly simply (e.g., mica | low selects low-tide Mica images). Importantly cross-site modeling, dates replaced seasons.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find orthoimages that match search names — search_names","text":"","code":"search_names(descrip)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find orthoimages that match search names — search_names","text":"descrip Description string. See details.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find orthoimages that match search names — search_names","text":"named list orthophoto attributes designated description","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find orthoimages that match search names — search_names","text":"Categories separated | (spaces optional anywhere except within name). Use commas separate multiple tags category. Pairs ordinal categories seasons dates may provided separated colon designate sequence; e.g., 2019:2022 2019, 2020, 2021, 2022. Tags may include modifiers (instance, high tide may modified high.spring). Modified tags returned lists paired category, modifier strings:  e.g., mid., high.springresults inlist(c('mid', ''), c('high', 'spring'))`. Non-existent tags generally result error informative message. Note , multiple tags, category determined first tag, sprang, summer, fall report three seasons errors, even though second two correct.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/search_names.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find orthoimages that match search names — search_names","text":"","code":"require(saltmarsh) init() #> NULL search_names('mid.in, mid.out, high') #> Error in read_pars_table(\"sites\"): Parameter sites not in  search_names('mica, swir, p4 | ortho | high.spring | spring:fall | 2019:2022') #> Error in read_pars_table(\"sites\"): Parameter sites not in  search_names('mica, swir | ortho, dem | low:high | spring | 2018') #> Error in read_pars_table(\"sites\"): Parameter sites not in  search_names('2022 | oth | mid | mica | ortho | mean.w5') #> Error in read_pars_table(\"sites\"): Parameter sites not in  search_names('20x22 | other | muddle | micro')                 # this throws an error #> Error in read_pars_table(\"sites\"): Parameter sites not in"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/seasons.html","id":null,"dir":"Reference","previous_headings":"","what":"Pull date, year, and season out of salt marsh imagery files — seasons","title":"Pull date, year, and season out of salt marsh imagery files — seasons","text":"Robust wildly haphazard file date formats (e.g., 18Jun2025, 18June25); pretty good job hunting date filename. Dates must dmy format, followed underscore. file names two dates, finds first.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/seasons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pull date, year, and season out of salt marsh imagery files — seasons","text":"","code":"seasons(files)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/seasons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pull date, year, and season out of salt marsh imagery files — seasons","text":"files Vector imagery file names","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/seasons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pull date, year, and season out of salt marsh imagery files — seasons","text":"named list : date vector dates yyyy-mm-dd format year vector years, 4 digit integers season vector seasons","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/seasons.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Pull date, year, and season out of salt marsh imagery files — seasons","text":"File names must include least month year get season, xOTH_Aug_CHM_CSF2012_Thin25cm_TriNN8cm.tif return NA season. errors may fixed editing flights_<site>.txt.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/set_dirs.html","id":null,"dir":"Reference","previous_headings":"","what":"Set complete paths to all directories — set_dirs","title":"Set complete paths to all directories — set_dirs","text":"Sets directory names pars.yml defaults. Note basedir, parsdir, scratchdir set init().","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/set_dirs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set complete paths to all directories — set_dirs","text":"","code":"set_dirs()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/set_up_google_drive.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a token to set up the Google Drive — set_up_google_drive","title":"Creates a token to set up the Google Drive — set_up_google_drive","text":"needs run just user saltmarsh. sends Google authorization page need log Google account, copy token, paste asked \"Enter authorization code.\"","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/set_up_google_drive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a token to set up the Google Drive — set_up_google_drive","text":"","code":"set_up_google_drive()"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/set_up_google_drive.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a token to set up the Google Drive — set_up_google_drive","text":"done, can verify access   write code needs access Google Drive, need call following per R session. saltmarsh takes care –necessary separate code.","code":"googledrive::drive_find(n_max = 5) googledrive::drive_auth(token = readRDS('~/.google_auth/google_drive_token.RDS'))"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/the.html","id":null,"dir":"Reference","previous_headings":"","what":"Script to set up environment for parameters — the","title":"Script to set up environment for parameters — the","text":"environment used user parameters. assigned init(), run package loaded, also may run user, e.g., parameter files changed.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/the.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Script to set up environment for parameters — the","text":"","code":"the"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/the.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Script to set up environment for parameters — the","text":"object class environment length 22.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/unconfuse.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean up confusion matrix and associated stats — unconfuse","title":"Clean up confusion matrix and associated stats — unconfuse","text":"Cleans confusion matrix caret/ranger model fit: class names numeric: include number confusion matrix sort numerically change labels Class <number> byClass table sort numerically Round byClass table 4 digits, plenty! Optionally add row AUC byClass table. model run necessary data AUC, message displayed row added.","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/unconfuse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean up confusion matrix and associated stats — unconfuse","text":"","code":"unconfuse(confuse, auc = TRUE, fit = NULL)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/unconfuse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean up confusion matrix and associated stats — unconfuse","text":"confuse Confusion matrix auc TRUE, add AUC byClass table fit ranger model object (needed auc = TRUE)","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/unconfuse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean up confusion matrix and associated stats — unconfuse","text":"new model object confusion matrix cleaned ","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/unconfuse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clean up confusion matrix and associated stats — unconfuse","text":"Print resulting table print(confuse, mode = 'prec_recall').","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/write_pars_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Write a parameter table — write_pars_table","title":"Write a parameter table — write_pars_table","text":"Given parameter name corresponds tab-delimited file, write data frame .","code":""},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/write_pars_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write a parameter table — write_pars_table","text":"","code":"write_pars_table(data, name)"},{"path":"https://umass-uas-salt-marsh.github.io/marshmap/reference/write_pars_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write a parameter table — write_pars_table","text":"data Data frame write name Parameter name","code":""}]
